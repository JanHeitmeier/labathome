!function(){return function t(e,o,n){function r(s,l){if(!o[s]){if(!e[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(i)return i(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=o[s]={exports:{}};e[s][0].call(c.exports,function(t){return r(e[s][1][t]||t)},c,c.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}}()({1:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.DevelopCFCController=o.ScreenController=void 0;const n=t("./Flowchart");class r{constructor(t){this.div=t,this.hideDIV(),this.state=a.CREATED}get ElementId(){return this.div.id}get State(){return this.state}set State(t){this.state=t}showDIV(){this.div.style.display="block"}hideDIV(){this.div.style.display="none"}}o.ScreenController=r;class i extends r{constructor(t){super(t),this.div=t;let e=new n.FlowchartOptions;e.data={operators:[{caption:"RedButton_1",type:"RedButton",id:"RedButton_1",posX:10,posY:10},{caption:"GreenButton_1",type:"GreenButton",id:"GreenButton_1",posX:10,posY:150},{caption:"AND_1",type:"AND",id:"AND_1",posX:250,posY:10},{caption:"RedLed_1",type:"RedLed",id:"RedLed_1",posX:500,posY:10}],links:[{color:"black",fromId:"RedButton_1",fromOutput:0,toId:"AND_1",toInput:0},{color:"black",fromId:"GreenButton_1",fromOutput:0,toId:"AND_1",toInput:1},{color:"black",fromId:"AND_1",fromOutput:0,toId:"RedLed_1",toInput:0}]},this.fc=new n.Flowchart(this.div,e)}onFirstStart(){this.fc.onFirstStart()}onRestart(){}onStop(){}onCreate(){}}o.DevelopCFCController=i;class s extends r{constructor(t){super(t),this.div=t}onFirstStart(){}onRestart(){}onStop(){}onCreate(){}}class l extends r{constructor(t){super(t),this.div=t}onFirstStart(){}onRestart(){}onStop(){}onCreate(){}}var a;!function(t){t[t.CREATED=0]="CREATED",t[t.STARTED=1]="STARTED",t[t.STOPPED=2]="STOPPED"}(a||(a={}));class p{constructor(){this.stateDiv=document.getElementById("spnConnectionState"),this.screenControllers=[],this.activeControllerIndex=0}SetApplicationState(t){this.stateDiv.innerHTML=t}setActiveScreen(t){this.screenControllers.forEach((e,o)=>{o==t?(e.showDIV(),e.State==a.CREATED?(e.onFirstStart(),e.State=a.STARTED):(e.onRestart(),e.State=a.STARTED)):(e.hideDIV(),e.State==a.STARTED&&(e.onStop(),e.State=a.STOPPED))}),this.activeControllerIndex=t}startup(){this.screenControllers.push(new s(document.getElementById("screen_dashboard"))),this.screenControllers.push(new i(document.getElementById("screen_develop"))),this.screenControllers.push(new l(document.getElementById("screen_reports"))),this.screenControllers.forEach(t=>t.onCreate()),this.setActiveScreen(0);let t=new Map;this.screenControllers.forEach((e,o)=>{t.set("show_"+e.ElementId,o)}),document.querySelectorAll("nav a").forEach(e=>{e.id;let o=t.get(e.id)||0;e.onclick=(t=>this.setActiveScreen(o))}),this.SetApplicationState("WebSocket is not connected");let e=new WebSocket("ws://"+location.hostname+"/w");e.onopen=(t=>{this.SetApplicationState("WebSocket connection opened"),document.getElementById("test").innerHTML="WebSocket is connected!"}),e.onmessage=(t=>{var e=t.data;let o;switch(e.charAt(0)){case"L":switch(console.log(e),o=e.replace(/[^0-9\.]/g,"")){case"0":document.getElementById("led1").style.backgroundColor="black";break;case"1":document.getElementById("led1").style.backgroundColor="green";break;case"2":document.getElementById("led2").style.backgroundColor="black";break;case"3":document.getElementById("led2").style.backgroundColor="green"}console.log("Led = "+o);break;default:let n=JSON.parse(t.data);document.getElementById("td_myName").innerText=n.d.myName,document.getElementById("td_temperature").innerText=n.d.temperature,document.getElementById("td_humidity").innerText=n.d.humidity,document.getElementById("td_heap").innerText=n.info.heap,document.getElementById("td_time").innerText=n.info.time}}),e.onclose=(t=>{console.log("Websocket connection closed due to "+t.reason),this.SetApplicationState("Websocket connection closed due to "+t.reason)}),e.onerror=(t=>{console.log("Websocket error: "+t.returnValue),this.SetApplicationState("WebSocket error!"+t.returnValue)}),document.querySelectorAll("#pButtons button").forEach(t=>{t.onclick=(o=>{e.send("L"+t.dataset.rel)})})}}let c;document.addEventListener("DOMContentLoaded",t=>{(c=new p).startup()})},{"./Flowchart":2}],2:[function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&n(e,t,o);return r(e,t),e};Object.defineProperty(o,"__esModule",{value:!0}),o.Flowchart=o.FlowchartOptions=void 0;const s=t("./FlowchartConnector"),l=t("./FlowchartExporter"),a=t("./FlowchartLink"),p=t("./FlowchartOperator"),c=i(t("./FlowchartOperatorImpl")),h=t("./TopologicalSorfDFS"),u=t("./Utils");o.FlowchartOptions=class{constructor(){this.canUserEditLinks=!0,this.canUserMoveOperators=!0,this.data=void 0,this.distanceFromArrow=3,this.defaultOperatorClass="flowchart-default-operator",this.defaultLinkColor="#3366ff",this.defaultSelectedLinkColor="black",this.linkWidth=10,this.grid=10,this.multipleLinksOnOutput=!0,this.multipleLinksOnInput=!1,this.linkVerticalDecal=0}};class d{constructor(t,e){if(this.container=t,this.options=e,this.operators=new Map,this.links=new Map,this.lastOutputConnectorClicked=null,this.selectedOperator=null,this.selectedLink=null,this.positionRatio=1,this.temporaryLinkSnapped=!1,this.upcounter=0,!this.container)throw new Error("container is null");let o=d.Html(this.container,"div",[],["develop-ui"]);o.onclick=(t=>{t.target.classList.contains("dropbtn")||Array.prototype.forEach.call(document.getElementsByClassName("dropdown-content"),t=>{t.classList.remove("show")})});let n=d.Html(o,"div",[],["develop-toolbar"]),r=(d.Html(n,"a",["href","#"],["develop-toolbar"],"File"),d.Html(n,"a",["href","#"],["develop-toolbar"],"Run"),d.Html(n,"div",[],["dropdown"])),i=d.Html(r,"button",[],["dropbtn"],"Debug â–¼"),s=d.Html(r,"div",[],["dropdown-content"]);i.onclick=(t=>{s.classList.toggle("show")}),d.Html(s,"a",["href","#"],[],"â˜­ Compile").onclick=(t=>{Array.prototype.forEach.call(document.getElementsByClassName("dropdown-content"),t=>{t.classList.remove("show")}),this.compile()}),d.Html(s,"a",["href","#"],[],"ðŸ‘£ Run on device").onclick=(t=>{});d.Html(s,"a",["href","#"],[],"â—‰ Stop"),d.Html(s,"a",["href","#"],[],"â—¯ Erase");let l=d.Html(o,"div",["tabindex","0"],["develop-workspace"]);this.propertyGridHtmlDiv=d.Html(o,"div",[],["develop-properties"]),this.flowchartContainerSvgSvg=d.Svg(l,"svg",["width","100%","height","100%"],["flowchart-container"]),this.linksLayer=d.Svg(this.flowchartContainerSvgSvg,"g",[],["flowchart-links-layer"]),this.operatorsLayer=d.Svg(this.flowchartContainerSvgSvg,"g",[],["flowchart-operators-layer","unselectable"]),this.tempLayer=d.Svg(this.flowchartContainerSvgSvg,"g",[],["flowchart-temporary-link-layer"]),this.tempLayer.style.visibility="hidden";let a=d.Svg(this.tempLayer,"defs",[]),p=d.Svg(a,"marker",["id","marker-arrow","markerWidth","4","markerHeight","4","refX","1","refY","2","orient","0"]);this.markerArrow=d.Svg(p,"path",["d","M0,0 L0,4 L2,2 z","fill","red","stroke","black","stroke-width","0.5"]);let c=d.Svg(a,"marker",["id","marker-circle","markerWidth","4","markerHeight","4","refX","2","refY","2","orient","0"]);this.markerCircle=d.Svg(c,"circle",["cx","2","cy","2","r","2","fill","red","stroke-width","1px","stroke","black"]),this.temporaryLink=d.Svg(this.tempLayer,"line",["x1","0","y1","0","x2","0","y2","0","stroke-dasharray","6,6","stroke-width","4","stroke","black","fill","none","marker-end","url(#marker-arrow)"]);let h=d.Svg(this.flowchartContainerSvgSvg,"rect",["width","40","height","100%","fill","white","fill-opacity","0"]);this.toolsLayer=d.Svg(this.flowchartContainerSvgSvg,"g",[],["flowchart-tools-layer","unselectable"]),this.toolsLayer.style.display="none";d.Svg(this.toolsLayer,"rect",["width","140","height","100%","rx","10","ry","10"],["tools-container"]);h.onmouseenter=(t=>{this.toolsLayer.style.display="initial"}),this.toolsLayer.onmouseleave=(t=>{this.toolsLayer.style.display="none"}),this.flowchartContainerSvgSvg.onclick=(t=>{t.target==this.Element&&(this.unselectOperator(),this.unselectLink())}),this.flowchartContainerSvgSvg.onmouseup=(t=>{console.log("Flowchart this.element.onmouseup with e.target="+t.target)}),l.onkeyup=(t=>{"Delete"==t.key?(console.log("Flowchart workspace.onkeyup with e.target="+t.target+" und Delete-Key"),this.deleteSelectedOperator()):console.log("Flowchart workspace.onkeyup with e.target="+t.target+" und key "+t.key)}),this.populateToolsLayer()}get SelectedLink(){return this.selectedLink}get PositionRatio(){return this.positionRatio}get LinkLayer(){return this.linksLayer}get OperatorsLayer(){return this.operatorsLayer}get ToolsLayer(){return this.toolsLayer}_notifyGlobalMousemoveWithLink(t){if(null!=this.lastOutputConnectorClicked&&!this.temporaryLinkSnapped){let e=u.Utils.EventCoordinatesInSVG(t,this.flowchartContainerSvgSvg,this.positionRatio);this.temporaryLink.setAttribute("x2",""+e.x),this.temporaryLink.setAttribute("y2",""+e.y)}}_notifyGlobalMouseupWithLink(t){this.unsetTemporaryLink()}_notifyOutputConnectorMousedown(t,e){this.temporaryLinkSnapped=!1;let o=t.GetLinkpoint(),n=u.Utils.EventCoordinatesInSVG(e,this.flowchartContainerSvgSvg,this.positionRatio);this.temporaryLink.setAttribute("x1",""+o.x),this.temporaryLink.setAttribute("y1",""+o.y),this.temporaryLink.setAttribute("x2",""+n.x),this.temporaryLink.setAttribute("y2",""+n.y),this.setTemporaryLink(t),document.onmouseup=(t=>{document.onmouseup=null,document.onmousemove=null,this._notifyGlobalMouseupWithLink(t)}),document.onmousemove=(t=>{this._notifyGlobalMousemoveWithLink(t)})}_notifyInputConnectorMouseup(t,e){null!=this.lastOutputConnectorClicked&&(!this.options.multipleLinksOnInput&&t.LinksLength>0||(this.lastOutputConnectorClicked.Type==t.Type&&this.createLink(null,this.lastOutputConnectorClicked,t),this.unsetTemporaryLink()))}_notifyOperatorClicked(t,e){this.SelectOperator(t)}_notifyLinkClicked(t,e){this.selectLink(t)}_notifyInputConnectorMouseenter(t,e){if(null==this.lastOutputConnectorClicked||this.lastOutputConnectorClicked.Type!=t.Type)return;if(!this.options.multipleLinksOnInput&&t.LinksLength>0)return;this.temporaryLinkSnapped=!0;let o=t.GetLinkpoint();this.temporaryLink.setAttribute("marker-end","url(#marker-circle)"),this.temporaryLink.setAttribute("x2",""+o.x),this.temporaryLink.setAttribute("y2",""+o.y)}_notifyInputConnectorMouseleave(t,e){this.temporaryLinkSnapped=!1,this.temporaryLink.setAttribute("marker-end","url(#marker-arrow)")}unselectLink(){if(null!=this.selectedLink){if(this.options.onLinkUnselect&&!this.options.onLinkUnselect(this.selectedLink))return;this.selectedLink.UncolorizeLink(),this.selectedLink=null}}selectLink(t){this.unselectLink(),this.options.onLinkSelect&&!this.options.onLinkSelect(t)||(this.unselectOperator(),this.selectedLink=t,t.ColorizeLink(this.options.defaultSelectedLinkColor))}compile(){let t=new Map;this.operators.forEach((e,o,n)=>{t.set(e.GlobalOperatorIndex,new h.NodeWrapper(e))});let e=[];for(let o of t.values()){let n=new Set;for(const e of o.Payload.InputsKVIt)for(const o of e[1].LinksKVIt){let e=o[1].From.Parent,r=t.get(e.GlobalOperatorIndex);if(!r)throw new Error("Implementation Error: dependentWrappedNode is undefined");n.add(r)}n.forEach(t=>o.DependendNodes.push(t)),o.Payload.TypeInfo.Position==p.PositionType.Output&&e.push(o)}let o=(new h.TopologicalSortDFS).sort(e);for(const t in o){o[t].Payload.SetDebugInfoText("Sequenznummer "+t)}l.FlowchartExporter.Export(o.map(t=>t.Payload))}deleteSelectedOperator(){if(this.selectedOperator){this.selectedOperator.RemoveFromDOM(),this.operators.delete(this.selectedOperator.GlobalOperatorIndex);for(const t of this.selectedOperator.OutputsKVIt)for(const e of t[1].LinksKVIt)this.DeleteLink(e[1].GlobalLinkIndex);this.unselectOperator()}}get Options(){return this.options}get Element(){return this.flowchartContainerSvgSvg}onFirstStart(){void 0!==typeof this.options.data&&null!=this.options.data&&this.setData(this.options.data)}populateToolsLayer(){let t=10;for(let e in c){if(c[e].GetTypeInfo){c[e].GetTypeInfo()}let o=d.Svg(this.toolsLayer,"g",["transform",`translate(5 ${t})`]),n=(d.Svg(o,"rect",["width","130","height","30","rx","10","ry","10"],["tool-box"]),d.Svg(o,"text",["x","5","y","25"],["tool-caption"]));o.onmousedown=(t=>{this.upcounter;let o=e.substring(0,e.length-"Operator".length)+"_"+this.upcounter;if(this.options.onOperatorCreate&&!this.options.onOperatorCreate(o,null,!1))return null;console.log("Creating "+o),this.upcounter++;let n=new c[e](this,o),r=u.Utils.EventCoordinatesInSVG(t,this.Element);n.MoveTo(r.x-10,r.y-10),n.RegisterDragging(t),this.operators.set(n.GlobalOperatorIndex,n)}),n.textContent=e,t+=40}}setData(t){this.links.forEach(t=>t.RemoveFromDOM()),this.links.clear(),this.operators.forEach(t=>t.RemoveFromDOM()),this.operators.clear();let e={};for(const o of t.operators){let t=this.createOperator(o);e[o.id]=t}for(const o of t.links){let t=e[o.fromId],n=e[o.toId];if(null==t||null==n)continue;let r=t.GetOutputConnectorByIndex(o.fromOutput),i=n.GetInputConnectorByIndex(o.toInput);null!=r&&null!=i&&this.createLink(o,r,i)}}DeleteLink(t){let e=this.links.get(t);if(null==e)throw Error("Link to delete is null");e.RemoveFromDOM(),this.links.delete(t),e.To.RemoveLink(e),e.From.RemoveLink(e)}createLink(t,e,o){if(this.options.onLinkCreate&&!this.options.onLinkCreate(e.Caption,t))return null;if(!this.options.multipleLinksOnOutput&&e.LinksLength>0)return null;if(!this.options.multipleLinksOnInput&&o.LinksLength>0)return null;let n=new a.FlowchartLink(this,"",this.Options.defaultLinkColor,e,o);return e.AddLink(n),o.AddLink(n),this.links.set(n.GlobalLinkIndex,n),n}createOperator(t){let e=t.type+"Operator";if(!c[e])throw new Error(`Unknown type ${t.type}`);if(this.options.onOperatorCreate&&!this.options.onOperatorCreate(t.caption,null,!1))throw new Error(`Creation of operator ${t.type} prevented by onOperatorCreate plugin`);let o=new c[e](this,t.caption);return o.MoveTo(t.posX,t.posY),this.operators.set(o.GlobalOperatorIndex,o),o}unsetTemporaryLink(){this.lastOutputConnectorClicked=null,this.tempLayer.style.visibility="hidden"}setTemporaryLink(t){this.lastOutputConnectorClicked=t;let e=d.DATATYPE2COLOR.get(t.Type);e||(e="BLACK"),this.markerArrow.style.fill=e,this.markerCircle.style.fill=e,this.tempLayer.style.visibility="visible"}unselectOperator(){this.options.onOperatorUnselect&&!this.options.onOperatorUnselect()||(this.propertyGridHtmlDiv.innerText="",null!=this.selectedOperator&&(this.selectedOperator.ShowAsSelected(!1),this.selectedOperator=null))}SelectOperator(t){if(this.options.onOperatorSelect&&!this.options.onOperatorSelect(t.Caption))return;this.unselectLink(),null!=this.selectedOperator&&this.selectedOperator.ShowAsSelected(!1),t.ShowAsSelected(!0),this.selectedOperator=t,this.propertyGridHtmlDiv.innerText="",d.Html(this.propertyGridHtmlDiv,"p",[],["develop-propertygrid-head"],`Properties for ${this.selectedOperator.Caption}`);let e=d.Html(this.propertyGridHtmlDiv,"table",[],["develop-propertygrid-table"]),o=d.Html(e,"tr",[],["develop-propertygrid-tr"]);d.Html(o,"th",[],["develop-propertygrid-th"],"Key"),d.Html(o,"th",[],["develop-propertygrid-th"],"Value"),this.selectedOperator.PopulateProperyGrid(e)?d.Html(this.propertyGridHtmlDiv,"button",[],["develop-propertygrid-button"],"Save"):(this.propertyGridHtmlDiv.innerText="",d.Html(this.propertyGridHtmlDiv,"p",[],["develop-propertygrid-head"],`No Properties for ${this.selectedOperator.Caption}`))}static _shadeColor(t,e){var o=parseInt(t.slice(1),16),n=e<0?0:255,r=e<0?-1*e:e,i=o>>16,s=o>>8&255,l=255&o;return"#"+(16777216+65536*(Math.round((n-i)*r)+i)+256*(Math.round((n-s)*r)+s)+(Math.round((n-l)*r)+l)).toString(16).slice(1)}static Svg(t,e,o,n){return d.Elem(d.SVGNS,t,e,o,n)}static Html(t,e,o,n,r){return d.Elem(d.HTMLNS,t,e,o,n,r)}static Elem(t,e,o,n,r,i){let s,l=document.createElementNS(t,o);if(r)for(const t of r)l.classList.add(t);for(s=0;s<n.length;s+=2)l.setAttribute(n[s],n[s+1]);return i&&(l.textContent=i),e.appendChild(l),l}}o.Flowchart=d,d.SVGNS="http://www.w3.org/2000/svg",d.XLINKNS="http://www.w3.org/1999/xlink",d.HTMLNS="http://www.w3.org/1999/xhtml",d.DATATYPE2COLOR=new Map([[s.ConnectorType.BOOLEAN,"RED"],[s.ConnectorType.COLOR,"GREEN"],[s.ConnectorType.FLOAT,"BLUE"],[s.ConnectorType.INTEGER,"YELLOW"],[s.ConnectorType.COLOR,"PURPLE"]])},{"./FlowchartConnector":3,"./FlowchartExporter":4,"./FlowchartLink":5,"./FlowchartOperator":6,"./FlowchartOperatorImpl":7,"./TopologicalSorfDFS":8,"./Utils":9}],3:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.FlowchartOutputConnector=o.FlowchartInputConnector=o.FlowchartConnector=o.ConnectorType=void 0;const n=t("./Flowchart"),r=20;var i;!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.BOOLEAN=1]="BOOLEAN",t[t.INTEGER=2]="INTEGER",t[t.FLOAT=3]="FLOAT",t[t.COLOR=4]="COLOR"}(i=o.ConnectorType||(o.ConnectorType={}));class s{constructor(t,e,o){this.parent=t,this.caption=e,this.type=o,this.links=new Map,this.HasLink=(t=>this.links.has(t)),this.AddLink=(t=>this.links.set(t.GlobalLinkIndex,t)),this.RemoveLink=(t=>this.links.delete(t.GlobalLinkIndex)),this.index=s.INDEX++;let l=this.getIOSpecifics(),a=r*l.parent.childElementCount;this.element=n.Flowchart.Svg(l.parent,"g",["transform",`translate(0 ${a})`],[`operator-${l.inputOrOutput}`]),this.element.setAttribute("data-connector-datatype",i[o]),n.Flowchart.Svg(this.element,"text",["dx",""+l.dx,"dy","4"],[`operator-${l.inputOrOutput}-caption`]).textContent=e,this.connectorGroup=n.Flowchart.Svg(this.element,"g",[]),this.connector=n.Flowchart.Svg(this.connectorGroup,"circle",["r","4"],[`operator-${l.inputOrOutput}-connector`,i[o]]),this.snapper=n.Flowchart.Svg(this.connectorGroup,"circle",["r","10"],[`operator-${l.inputOrOutput}-snapper`]),this.element.onmouseover=(t=>{for(const t of this.links.values())t&&t!=this.parent.Parent.SelectedLink&&t.ColorizeLink(n.Flowchart._shadeColor(this.parent.Parent.Options.defaultLinkColor,-.4))}),this.element.onmouseout=(t=>{for(const t of this.links.values())t&&t!=this.parent.Parent.SelectedLink&&t.UncolorizeLink()})}get GlobalConnectorIndex(){return this.index}get Element(){return this.element}get LinksLength(){return this.links.size}GetLinksCopy(){return Array.from(this.links.values())}get LinksKVIt(){return this.links.entries()}RefreshLinkPositions(){this.links.forEach(t=>{t.RefreshPosition()})}get Parent(){return this.parent}get Caption(){return this.caption}get Type(){return this.type}GetLinkpoint(){let t=this.Parent.Parent,e=t.PositionRatio,o=t.Element.getBoundingClientRect(),n=this.connector.getBoundingClientRect();return{x:(n.left-o.left)/e+n.width/2,y:(n.top-o.top)/e+n.height/2}}}o.FlowchartConnector=s,s.INDEX=0;o.FlowchartInputConnector=class extends s{constructor(t,e,o){super(t,e,o),this.connectorGroup.onmouseup=(e=>{t.Parent._notifyInputConnectorMouseup(this,e)}),this.connectorGroup.onmouseenter=(e=>{t.Parent._notifyInputConnectorMouseenter(this,e)}),this.connectorGroup.onmouseleave=(e=>{t.Parent._notifyInputConnectorMouseleave(this,e)})}GetLinkpointXOffset(t){return 0}getIOSpecifics(){return{inputOrOutput:"input",parent:this.Parent.InputSvgG,translateY:0,dx:8}}};o.FlowchartOutputConnector=class extends s{constructor(t,e,o){super(t,e,o),this.element.onmousedown=(e=>{t.Parent._notifyOutputConnectorMousedown(this,e)})}GetLinkpointXOffset(t){return t}getIOSpecifics(){return{inputOrOutput:"output",parent:this.Parent.OutputSvgG,translateY:140,dx:-8}}}},{"./Flowchart":2}],4:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.FlowchartExporter=void 0;const n=t("./FlowchartConnector");class r{static getRandomValuesWithMathRandom(t){const e=Math.pow(2,8*t.byteLength/t.length);for(let o=0;o<t.length;o++)t[o]=Math.random()*e}static getRandomBytes(t){const e=new Uint8Array(t);return"undefined"!=typeof crypto?crypto.getRandomValues(e):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(e):r.getRandomValuesWithMathRandom(e),e}static Export(t){let e=new Map,o=new Map;for(let t in n.ConnectorType)isNaN(Number(t))||(e.set(Number(t),new Map),o.set(Number(t),2));for(const n of t)for(const t of n.OutputsKVIt)if(0==t[1].LinksLength)e.get(t[1].Type).set(t[1].GlobalConnectorIndex,0);else{let n=o.get(t[1].Type);e.get(t[1].Type).set(t[1].GlobalConnectorIndex,n),n++,o.set(t[1].Type,n)}let i=new ArrayBuffer(Math.pow(2,16)),s={typeIndex2globalConnectorIndex2adressOffset:e,buffer:new DataView(i),bufferOffset:0};s.buffer.setUint32(s.bufferOffset,2952710910,!0),s.bufferOffset+=4;let l=r.getRandomBytes(16);l.forEach((t,e)=>{s.buffer.setUint8(s.bufferOffset+e,t)}),s.bufferOffset+=16;for(const e of t)e.SerializeToBinary(s);let a="const uint8_t code[] = {";for(let t=0;t<s.bufferOffset;t++)a+="0x"+s.buffer.getUint8(t).toString(16)+", ";return a+="};",window.alert(a),l}}o.FlowchartExporter=r},{"./FlowchartConnector":3}],5:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.FlowchartLink=void 0;const n=t("./Flowchart");class r{constructor(t,e,o,i,s){this.parent=t,this.caption=e,this.color=o,this.from=i,this.to=s,this.index=r.MAX_INDEX++,this.element=n.Flowchart.Svg(t.LinkLayer,"path",["stroke-width",""+this.parent.Options.linkWidth,"fill","none","id","LINK"+this.index]),this.RefreshPosition(),this.UncolorizeLink(),this.parent.LinkLayer.appendChild(this.element),this.captionElement=n.Flowchart.Svg(t.LinkLayer,"text",[]);let l=n.Flowchart.Svg(this.captionElement,"textPath",["startOffset","50%","text-anchor","middle"]);l.setAttributeNS(n.Flowchart.XLINKNS,"href","#LINK"+this.index),l.innerHTML=e,this.element.onclick=(t=>{this.parent._notifyLinkClicked(this,t)})}get GlobalLinkIndex(){return this.index}get From(){return this.from}get To(){return this.to}set Color(t){this.color=t}RemoveFromDOM(){this.element.remove(),this.captionElement.remove()}ColorizeLink(t){this.element.setAttribute("stroke",t)}UncolorizeLink(){this.ColorizeLink(this.parent.Options.defaultLinkColor)}RefreshPosition(){let t=this.from.GetLinkpoint(),e=this.to.GetLinkpoint(),o=t.x,n=t.y+this.parent.Options.linkVerticalDecal,r=e.x,i=e.y+this.parent.Options.linkVerticalDecal,s=this.parent.Options.distanceFromArrow,l=o+s,a=r+1,p=Math.min(100,Math.max(Math.abs(l-a)/2,Math.abs(n-i)));this.element.setAttribute("d","M"+l+","+n+" C"+(o+s+p)+","+n+" "+(r-p)+","+i+" "+a+","+i)}}o.FlowchartLink=r,r.MAX_INDEX=0},{"./Flowchart":2}],6:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.FlowchartOperator=o.TypeInfo=o.SingletonType=o.PositionType=void 0;const n=t("./Flowchart"),r=t("./Utils");!function(t){t[t.Default=0]="Default",t[t.Input=1]="Input",t[t.Output=2]="Output"}(o.PositionType||(o.PositionType={})),function(t){t[t.Default=0]="Default",t[t.Singleton=1]="Singleton"}(o.SingletonType||(o.SingletonType={}));o.TypeInfo=class{constructor(t,e,o){this.GlobalTypeIndex=t,this.Position=e,this.Singleton=o}};class i{constructor(t,e,o){this.parent=t,this.caption=e,this.typeInfo=o,this.Inputs=[],this.Outputs=[],this.x=0,this.y=0,this.GetOutputConnectorByIndex=(t=>this.Outputs[t]),this.GetInputConnectorByIndex=(t=>this.Inputs[t]),this.index=i.MAX_INDEX++,this.elementSvgG=n.Flowchart.Svg(t.OperatorsLayer,"g",[],["operator"]),this.elementSvgG.setAttribute("data-operator-index",""+this.index),this.box=n.Flowchart.Svg(this.elementSvgG,"rect",["width","140","height","100","rx","10","ry","10"],["operator-box"]);let r=n.Flowchart.Svg(this.elementSvgG,"text",["x","5","y","21"],["operator-title"]);r.textContent=e,this.inputSvgG=n.Flowchart.Svg(this.elementSvgG,"g",["transform","translate(0 50)"],["operator-inputs"]),this.outputSvgG=n.Flowchart.Svg(this.elementSvgG,"g",["transform","translate(140 50)"],["operator-outputs"]),this.debugInfoSvgText=n.Flowchart.Svg(this.elementSvgG,"text",["x","0","y","100"],["operator-debuginfo"]),this.debugInfoSvgText.textContent="No debug info",this.box.onclick=(e=>{console.log("FlowchartOperator this.box.onclick"),t._notifyOperatorClicked(this,e)}),this.parent.Options.canUserMoveOperators&&(r.onmousedown=(t=>{this.RegisterDragging(t)}))}get GlobalOperatorIndex(){return this.index}get ElementSvgG(){return this.elementSvgG}get InputSvgG(){return this.inputSvgG}get OutputSvgG(){return this.outputSvgG}get TypeInfo(){return this.typeInfo}ShowAsSelected(t){t?this.box.classList.add("selected"):this.box.classList.remove("selected")}SetDebugInfoText(t){this.debugInfoSvgText.textContent=t}RegisterDragging(t){r.Utils.EventCoordinatesInSVG(t,this.ElementSvgG);let e=t.clientX-this.x,o=t.clientY-this.y;document.onmouseup=(t=>{document.onmouseup=null,document.onmousemove=null}),document.onmousemove=(t=>{this.MoveTo(t.clientX-e,t.clientY-o)})}get Parent(){return this.parent}get Caption(){return this.caption}get InputsKVIt(){return this.Inputs.entries()}get OutputsKVIt(){return this.Outputs.entries()}RemoveFromDOM(){this.elementSvgG.remove()}AppendConnectors(t,e){if(0!=this.Inputs.length||0!=this.Outputs.length)throw new Error("AppendConnectors may only be called once!");for(const e of t)e.Parent==this&&this.Inputs.push(e);for(const t of e)t.Parent==this&&this.Outputs.push(t);let o=50+20*Math.max(this.Inputs.length,this.Outputs.length)+10;this.box.setAttribute("height",""+o),this.debugInfoSvgText.setAttribute("y",""+o)}MoveTo(t,e){let o=this.parent.Options.grid;this.x=Math.round(t/o)*o,this.y=Math.round(e/o)*o,this.elementSvgG.setAttribute("transform",`translate(${this.x} ${this.y})`);for(const t of this.Inputs)t.RefreshLinkPositions();for(const t of this.Outputs)t.RefreshLinkPositions()}PopulateProperyGrid(t){return!1}SerializeInputsAndOutputs(t){for(const e of this.Inputs){let o=0,n=e.GetLinksCopy();if(0==n.length)o=1;else{let e=n[0].From;o=t.typeIndex2globalConnectorIndex2adressOffset.get(e.Type).get(e.GlobalConnectorIndex)||1}t.buffer.setUint32(t.bufferOffset,o,!0),t.bufferOffset+=4}for(const e of this.Outputs){let o=0;o=0==e.LinksLength?0:t.typeIndex2globalConnectorIndex2adressOffset.get(e.Type).get(e.GlobalConnectorIndex)||1,t.buffer.setUint32(t.bufferOffset,o,!0),t.bufferOffset+=4}}SerializeToBinary(t){t.buffer.setUint32(t.bufferOffset,this.TypeInfo.GlobalTypeIndex,!0),t.bufferOffset+=4,t.buffer.setUint32(t.bufferOffset,this.GlobalOperatorIndex,!0),t.bufferOffset+=4,this.SerializeInputsAndOutputs(t),this.SerializeFurtherProperties(t)}SerializeFurtherProperties(t){}}o.FlowchartOperator=i,i.MAX_INDEX=0},{"./Flowchart":2,"./Utils":9}],7:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.ConstINTOperator=o.ConstTRUEOperator=o.GreenLedOperator=o.YellowLedOperator=o.RedLedOperator=o.RelayOperator=o.TempSensorOperator=o.MoveSensorOperator=o.RedButtonOperator=o.EncoderButtonOperator=o.GreenButtonOperator=o.NotOperator=o.RSOperator=o.MINOperator=o.MAXOperator=o.MULTOperator=o.ADDOperator=o.OROperator=o.ANDOperator=void 0;const n=t("./FlowchartOperator"),r=t("./Flowchart"),i=t("./FlowchartConnector");o.ANDOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(1,n.PositionType.Default,n.SingletonType.Default));let o=new i.FlowchartInputConnector(this,"A",i.ConnectorType.BOOLEAN),r=new i.FlowchartInputConnector(this,"B",i.ConnectorType.BOOLEAN),s=new i.FlowchartOutputConnector(this,"C",i.ConnectorType.BOOLEAN);this.AppendConnectors([o,r],[s])}};o.OROperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(2,n.PositionType.Default,n.SingletonType.Default));let o=new i.FlowchartInputConnector(this,"A",i.ConnectorType.BOOLEAN),r=new i.FlowchartInputConnector(this,"B",i.ConnectorType.BOOLEAN),s=new i.FlowchartOutputConnector(this,"C",i.ConnectorType.BOOLEAN);this.AppendConnectors([o,r],[s])}};o.ADDOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(3,n.PositionType.Default,n.SingletonType.Default));let o=new i.FlowchartInputConnector(this,"A",i.ConnectorType.INTEGER),r=new i.FlowchartInputConnector(this,"B",i.ConnectorType.INTEGER),s=new i.FlowchartOutputConnector(this,"C",i.ConnectorType.INTEGER);this.AppendConnectors([o,r],[s])}};o.MULTOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(4,n.PositionType.Default,n.SingletonType.Default));let o=new i.FlowchartInputConnector(this,"A",i.ConnectorType.INTEGER),r=new i.FlowchartInputConnector(this,"B",i.ConnectorType.INTEGER),s=new i.FlowchartOutputConnector(this,"C",i.ConnectorType.INTEGER);this.AppendConnectors([o,r],[s])}};o.MAXOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(5,n.PositionType.Default,n.SingletonType.Default));let o=new i.FlowchartInputConnector(this,"A",i.ConnectorType.INTEGER),r=new i.FlowchartInputConnector(this,"B",i.ConnectorType.INTEGER),s=new i.FlowchartOutputConnector(this,"C",i.ConnectorType.INTEGER);this.AppendConnectors([o,r],[s])}};o.MINOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(6,n.PositionType.Default,n.SingletonType.Default));let o=new i.FlowchartInputConnector(this,"A",i.ConnectorType.INTEGER),r=new i.FlowchartInputConnector(this,"B",i.ConnectorType.INTEGER),s=new i.FlowchartOutputConnector(this,"C",i.ConnectorType.INTEGER);this.AppendConnectors([o,r],[s])}};o.RSOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(7,n.PositionType.Default,n.SingletonType.Default));let o=new i.FlowchartInputConnector(this,"R",i.ConnectorType.BOOLEAN),r=new i.FlowchartInputConnector(this,"S",i.ConnectorType.BOOLEAN),s=new i.FlowchartOutputConnector(this,"C",i.ConnectorType.BOOLEAN);this.AppendConnectors([o,r],[s])}};o.NotOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(8,n.PositionType.Default,n.SingletonType.Default));let o=new i.FlowchartInputConnector(this,"A",i.ConnectorType.BOOLEAN),r=new i.FlowchartOutputConnector(this,"C",i.ConnectorType.BOOLEAN);this.AppendConnectors([o],[r])}};o.GreenButtonOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(9,n.PositionType.Input,n.SingletonType.Singleton));let o=new i.FlowchartOutputConnector(this,"IsPressed",i.ConnectorType.BOOLEAN);this.AppendConnectors([],[o]),this.StorageId="4711"}};o.EncoderButtonOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(10,n.PositionType.Input,n.SingletonType.Singleton));let o=new i.FlowchartOutputConnector(this,"IsPressed",i.ConnectorType.BOOLEAN);this.AppendConnectors([],[o]),this.StorageId="4711"}};o.RedButtonOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(11,n.PositionType.Input,n.SingletonType.Singleton));let o=new i.FlowchartOutputConnector(this,"IsPressed",i.ConnectorType.BOOLEAN);this.AppendConnectors([],[o]),this.StorageId="4711"}};o.MoveSensorOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(12,n.PositionType.Input,n.SingletonType.Singleton));let o=new i.FlowchartOutputConnector(this,"Movement",i.ConnectorType.BOOLEAN);this.AppendConnectors([],[o]),this.StorageId="4711"}};o.TempSensorOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(13,n.PositionType.Input,n.SingletonType.Singleton));let o=new i.FlowchartOutputConnector(this,"Temperatur",i.ConnectorType.FLOAT);this.AppendConnectors([],[o]),this.StorageId="4711"}};o.RelayOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(14,n.PositionType.Output,n.SingletonType.Singleton));let o=new i.FlowchartInputConnector(this,"Relay",i.ConnectorType.BOOLEAN);this.AppendConnectors([o],[]),this.StorageId="4711"}};o.RedLedOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(15,n.PositionType.Output,n.SingletonType.Singleton));let o=new i.FlowchartInputConnector(this,"LED",i.ConnectorType.BOOLEAN);this.AppendConnectors([o],[]),this.StorageId="4711"}};o.YellowLedOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(16,n.PositionType.Output,n.SingletonType.Singleton));let o=new i.FlowchartInputConnector(this,"LED",i.ConnectorType.BOOLEAN);this.AppendConnectors([o],[]),this.StorageId="4711"}};o.GreenLedOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(17,n.PositionType.Output,n.SingletonType.Singleton));let o=new i.FlowchartInputConnector(this,"LED",i.ConnectorType.BOOLEAN);this.AppendConnectors([o],[]),this.StorageId="4711"}};o.ConstTRUEOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(18,n.PositionType.Input,n.SingletonType.Default));let o=new i.FlowchartOutputConnector(this,"TRUE",i.ConnectorType.BOOLEAN);this.AppendConnectors([],[o]),this.StorageId="4711"}};o.ConstINTOperator=class extends n.FlowchartOperator{constructor(t,e){super(t,e,new n.TypeInfo(19,n.PositionType.Input,n.SingletonType.Default));let o=new i.FlowchartOutputConnector(this,"Out",i.ConnectorType.BOOLEAN);this.AppendConnectors([],[o]),this.StorageId="4711"}PopulateProperyGrid(t){return s.Number(t,"Constant",-32768,32767),!0}};class s{static Number(t,e,o,n){let i=r.Flowchart.Html(t,"tr",[],["develop-propertygrid-tr"]);r.Flowchart.Html(i,"td",[],["develop-propertygrid-td"],e);let s=r.Flowchart.Html(i,"td",[],["develop-propertygrid-td"]);r.Flowchart.Html(s,"input",["type","number","min",""+Math.round(o),"max",""+Math.round(n)])}}},{"./Flowchart":2,"./FlowchartConnector":3,"./FlowchartOperator":6}],8:[function(t,e,o){"use strict";var n;Object.defineProperty(o,"__esModule",{value:!0}),o.TopologicalSortDFS=o.NodeWrapper=void 0,function(t){t[t.NONE=0]="NONE",t[t.TEMPORARY=1]="TEMPORARY",t[t.PERMANENT=2]="PERMANENT"}(n||(n={}));o.NodeWrapper=class{constructor(t){this.payload=t,this.Mark=n.NONE,this.DependendNodes=[]}get Payload(){return this.payload}};o.TopologicalSortDFS=class{constructor(){this.L=new Array}sort(t){return this.L=new Array,t.forEach(t=>this.visit(t)),this.L}visit(t){if(t.Mark!=n.PERMANENT){if(t.Mark==n.TEMPORARY)throw new Error("not a DAG");t.Mark=n.TEMPORARY;for(const e of t.DependendNodes)this.visit(e);t.Mark=n.PERMANENT,this.L.push(t)}}}},{}],9:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Utils=void 0;o.Utils=class{static EventCoordinatesInSVG(t,e,o=1){let n=e.getBoundingClientRect();return{x:(t.clientX-n.left)/o,y:(t.clientY-n.top)/o}}}},{}]},{},[1]);
//# sourceMappingURL=bundle-min.js.map
